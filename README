Compile: make / make all
Run tests: make clean && make TEST=1
Run in qemu: make qemu / make qemu-nox
Debug with gdb: make qemu-gdb / make qemu-nox-gdb
                (in another terminal) gdb

To use your solutions from lab 1: git merge lab1
To use sample lab 1 solutions: copy files in samples/ to appropriate directories

List here the following info:
1. who you have worked with
2. whether you coded this assignment together, and if not, who worked on which part
3. brief description of what you have implemented
4. and anything else you would like us to know


I worked with Benjamin Chen (blc38) and we coded this assignment together.

Exercise 2
thread_sleep causes a thread that is waiting on a lock for a memory channel to go to sleep, and be woken up by the lock-holder of that respective channel using thread_wakeup. This is implemented by having a channel field in the TCBs, that is traversed by thread_wakeup when the channel-user thread is done execution on that respective memory channel.


Exercise 3
Added another case to handle disk interrupts. Calls ide_intr() and intr_eoi() to handle the interrupt and signal the end of it once interrupt has been handles. Also added a case to handle the spurious IDQ_IDE2 signals.


Exercise 9
In dir_lookup, we read all the directory entries in the directory inode by using inode_read on the respective directory entry offsets. Once we find an inode that has a directory name matching the 'name' parameter, we return that inode.

In dir_link we perform dir_lookup to check if the name is present in the directory inode, to ensure that the subdirectory exists. Then we look for an empty directory entry by looking through all the directory entry offsets using inode_read. We call inode_write on the available directory entry.


Exercise 10
We implemented skipelem by looping through the path and setting conditions accordingly to achieve the desired behavior.

We process one element at a time using skipelem, then performing dir_lookup on the each element to eventually reach the end of the path and return its inode. We make sure to lock the inode before performing dir_lookup.

Exercise 12
Modified the implementations of the sys_link, sys_unlink, sys_open, sys_mkdir, and sys_chdir to pass in string input lengths to limit length of data that can be passed from the user.

Exercise 13
sys_read - opens a file from file descriptor using tcb_get_openfiles and then performs file_read on the opened file

sys_write - opens a file from the file descriptor using tcb_get_openfiles and then performs file_write on the opened file

sys_close - closes a file specified by the file descriptor using tcb_get_openfiles

sys_fstat - retrieves file specified by file descriptor using tcb_get_openfiles, followed by calling file_stat on this file

Exercise 15
Added appropriate spinlocks


Part 4: Shell
Implemented commands:
ls [path] - includes performing ls on a path
pwd - traverses path backwards via ".." directory
cd [path] - changes directory to the specified path
cp [source] [dest] - we did not implement the recursive option
mv [source] [dest] - since we did not implement the recursive option for cp and rm, mv is not recursive
rm [path] - we did not implement the recursive option
mkdir [name] - makes new directory with specified name in the current directory
cat [path] - prints out file contents to stdout
touch [name] - creates a new file of specified name in the current directory
write (string with quotations or a single string) [file] - writes specified string to file, overwriting contents
append (string with quotations or a single string) [file] - appends specified string to file

## Example shell run

prompt> mkdir ben
prompt> touch test
prompt> ls
.       ..      README  ben     test
prompt> write "this is a test" test
prompt> cat test
this is a test
prompt> mv test ben
prompt> ls
.       ..      README  ben
prompt> cd ben
prompt> pwd
/ben
prompt> ls
.       ..      test
prompt> cat test
this is a test
prompt> append " and another test" test
prompt> mkdir longfei
prompt> ls
.       ..      test    longfei
prompt> cp test longfei
prompt> cat test/longfei
file does not exist
prompt> ls longfei
.       ..      test
prompt> cat longfei/test
this is a test and another test
prompt> rm longfei/test
prompt> ls longfei
.       ..